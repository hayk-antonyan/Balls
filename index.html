<!DOCTYPE html>
<html>
<head>
  <title>Ball Game</title>
  <style>
    .container {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
    }
    .ball {
      width: 40px;
      height: 40px;
      border-radius: 50%;
    }
  </style>
</head>
<body>
  <div class="container"></div>

  <script>
    let board = [];
    const colors = ["red", "blue", "green", "yellow", "purple"];
    const boardLength = 9;

    function initBoard(boardLength) {
      for (let i = 0; i < boardLength ** 2; i++) {
        board.push(null);
      }
      updateBoard();
    }

    function startGame() {
      const randomBallsCount = 3;
      initBoard(boardLength);
      addRandomBalls(randomBallsCount);
    }
    startGame();

    function updateBoard() {
      const containerElement = document.querySelector(".container");
      containerElement.innerHTML = ''; // Clear the container

      for (let i = 0; i < boardLength ** 2; i++) {
        const printingDiv = document.createElement("div");
        printingDiv.setAttribute('id', i);
        const ballColor = board[i];
        if (ballColor) {
          const ball = document.createElement('div');
          ball.classList.add('ball');
          ball.style.backgroundColor = ballColor;
          printingDiv.appendChild(ball);
        }
        containerElement.appendChild(printingDiv);
      }
    }

    const containerElement = document.querySelector(".container");
    containerElement.addEventListener('click', function (event) {
      const clickedDivId = event.target.id;

      if (board[clickedDivId] === null) {
        return; // Ignore clicks on empty cells
      }

      // Find the next empty cell
      let nextEmptyCellId = null;
      for (let i = 0; i < board.length; i++) {
        if (board[i] === null) {
          nextEmptyCellId = i;
          break;
        }
      }

      if (nextEmptyCellId !== null) {
        board[nextEmptyCellId] = board[clickedDivId];
        board[clickedDivId] = null;
        updateBoard();
        addRandomBalls(1); // Add a new random ball after moving
      }
    });

    function addRandomBalls(count) {
      for (let i = 0; i < count; i++) {
        const emptyCells = [];
        for (let j = 0; j < board.length; j++) {
          if (board[j] === null) {
            emptyCells.push(j);
          }
        }

        if (emptyCells.length > 0) {
          const randomIndex = Math.floor(Math.random() * emptyCells.length);
          const randomEmptyCellId = emptyCells[randomIndex];
          const randomColorIndex = Math.floor(Math.random() * colors.length);
          board[randomEmptyCellId] = colors[randomColorIndex];
        }
      }
      updateBoard();
    }
  </script>
</body>
</html>
s